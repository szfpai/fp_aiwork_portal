"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _vue=require("vue"),_xeUtils=_interopRequireDefault(require("xe-utils")),_ui=require("../../ui"),_dom=require("../../ui/src/dom"),_utils=require("../../ui/src/utils"),_vn=require("../../ui/src/vn"),_input=_interopRequireDefault(require("../../input/src/input"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function isOptionVisible(e){return!1!==e.visible}function getOptUniqueId(){return _xeUtils.default.uniqueId("opt_")}var _default=exports.default=(0,_vue.defineComponent)({name:"VxeSelect",props:{modelValue:[String,Number,Boolean,Array],defaultConfig:Object,clearable:Boolean,placeholder:String,readonly:{type:Boolean,default:null},loading:Boolean,disabled:{type:Boolean,default:null},multiple:Boolean,multiCharOverflow:{type:[Number,String],default:()=>(0,_ui.getConfig)().select.multiCharOverflow},prefixIcon:String,allowCreate:{type:Boolean,default:()=>(0,_ui.getConfig)().select.allowCreate},placement:String,options:Array,optionProps:Object,optionGroups:Array,optionGroupProps:Object,optionConfig:Object,className:[String,Function],popupClassName:[String,Function],max:{type:[String,Number],default:null},size:{type:String,default:()=>(0,_ui.getConfig)().select.size||(0,_ui.getConfig)().size},filterable:Boolean,filterMethod:Function,remote:Boolean,remoteMethod:Function,remoteConfig:Object,emptyText:String,transfer:{type:Boolean,default:null},virtualYConfig:Object,scrollY:Object,optionId:{type:String,default:()=>(0,_ui.getConfig)().select.optionId},optionKey:Boolean},emits:["update:modelValue","change","clear","blur","focus","click","scroll","visible-change"],setup(S,e){const{slots:y,emit:i}=e,f=(0,_vue.inject)("$xeModal",null),x=(0,_vue.inject)("$xeDrawer",null),D=(0,_vue.inject)("$xeTable",null),l=(0,_vue.inject)("$xeForm",null),a=(0,_vue.inject)("xeFormItemInfo",null);var t=_xeUtils.default.uniqueId();const b=(0,_vue.ref)(),T=(0,_vue.ref)(),E=(0,_vue.ref)(),V=(0,_vue.ref)(),L=(0,_vue.ref)(),O=(0,_vue.ref)(),Y=(0,_ui.useSize)(S)["computeSize"],I=(0,_vue.reactive)({initialized:!1,scrollYLoad:!1,bodyHeight:0,topSpaceHeight:0,optList:[],afterVisibleList:[],staticOptions:[],reactFlag:0,currentOption:null,searchValue:"",searchLoading:!1,panelIndex:0,panelStyle:{},panelPlacement:null,triggerFocusPanel:!1,visiblePanel:!1,isAniVisible:!1,isActivated:!1}),C={synchData:[],fullData:[],optAddMaps:{},optGroupKeyMaps:{},optFullValMaps:{},remoteValMaps:{},lastScrollLeft:0,lastScrollTop:0,scrollYStore:{startIndex:0,endIndex:0,visibleSize:0,offsetSize:0,rowHeight:0},lastScrollTime:0,hpTimeout:void 0},H={refElem:b},P={xID:t,props:S,context:e,reactData:I,internalData:C,getRefMaps:()=>H},B=(0,_vue.computed)(()=>{var e=S["readonly"];return null===e?!!l&&l.props.readonly:e}),A=(0,_vue.computed)(()=>{var e=S["disabled"];return null===e?!!l&&l.props.disabled:e}),M=(0,_vue.computed)(()=>{var e=S["transfer"];if(null===e){var t=(0,_ui.getConfig)().select.transfer;if(_xeUtils.default.isBoolean(t))return t;if(D||f||x||l)return!0}return e}),j=(0,_vue.computed)(()=>{var e=S["placeholder"];return(e=e||(0,_ui.getConfig)().select.placeholder)?(0,_utils.getFuncText)(e):(0,_ui.getI18n)("vxe.base.pleaseSelect")}),q=(0,_vue.computed)(()=>Object.assign({},S.defaultConfig)),o=(0,_vue.computed)(()=>Object.assign({},S.optionProps)),s=(0,_vue.computed)(()=>Object.assign({},S.optionGroupProps)),c=(0,_vue.computed)(()=>{return o.value.label||"label"}),N=(0,_vue.computed)(()=>{return o.value.value||"value"}),K=(0,_vue.computed)(()=>{return s.value.label||"label"}),z=(0,_vue.computed)(()=>{return s.value.options||"options"}),G=(0,_vue.computed)(()=>{var{modelValue:e,multiple:t,max:l}=S;return!(!t||!l)&&(_xeUtils.default.isArray(e)?e.length:_xeUtils.default.eqNull(e)?0:1)>=_xeUtils.default.toNumber(l)}),$=(0,_vue.computed)(()=>Object.assign({},(0,_ui.getConfig)().select.virtualYConfig||(0,_ui.getConfig)().select.scrollY,S.virtualYConfig||S.scrollY)),R=(0,_vue.computed)(()=>Object.assign({},(0,_ui.getConfig)().select.remoteConfig,S.remoteConfig)),W=(0,_vue.computed)(()=>Object.assign({},(0,_ui.getConfig)().select.optionConfig,S.optionConfig)),X=(0,_vue.computed)(()=>_xeUtils.default.toNumber(S.multiCharOverflow)),Z=(0,_vue.computed)(()=>{const{modelValue:e,remote:t,multiple:l}=S;var i,a=I["reactFlag"];const o=X.value;return _xeUtils.default.eqNull(e)?"":(i=_xeUtils.default.isArray(e)?e:[e],(t&&a?i.map(e=>ee(e)):i.map(e=>{e=te(e);return l&&0<o&&e.length>o?e.substring(0,o)+"...":e})).join(", "))}),J=(e,t)=>e&&(_xeUtils.default.isString(e)&&(e=y[e]||null),_xeUtils.default.isFunction(e))?(0,_vn.getSlotVNs)(e(t)):[],r=(e,t,l)=>{i(e,(0,_ui.createEvent)(l,{$select:P},t))},Q=e=>{i("update:modelValue",e)},_=()=>{return W.value.keyField||S.optionId||"_X_OPTION_KEY"},w=e=>{e=e[_()];return e?encodeURIComponent(e):""},ee=e=>{var{remoteValMaps:t,optFullValMaps:l}=C,i=c.value,t=t[e]||l[e],l=t?t.item:null;return _xeUtils.default.toValueString(l?l[i]:e)},te=e=>{var t=C["optFullValMaps"],l=c.value,t=I.reactFlag?t[e]:null;return t?t.item[l]:_xeUtils.default.toValueString(e)},g=()=>{const{modelValue:t,filterable:e,filterMethod:l}=S,i=I["searchValue"],{fullData:a,optFullValMaps:o}=C,s=c.value,r=N.value,n=(""+(i||"")).toLowerCase();let u=[];return(u=e&&l?a.filter(e=>isOptionVisible(e)&&l({$select:P,group:null,option:e,searchValue:i,value:t})):e?a.filter(e=>isOptionVisible(e)&&(!n||-1<(""+e[s]).toLowerCase().indexOf(n))):a.filter(isOptionVisible)).forEach((e,t)=>{e=o[e[r]];e&&(e._index=t)}),I.afterVisibleList=u,(0,_vue.nextTick)()},le=e=>{e&&(I.currentOption=e)},ie=()=>(0,_vue.nextTick)().then(()=>{var i=S["placement"],a=I["panelIndex"],o=b.value,s=L.value,e=M.value;if(s&&o){var r=o.offsetHeight,n=o.offsetWidth,u=s.offsetHeight,s=s.offsetWidth,a={zIndex:a},{boundingTop:o,boundingLeft:c,visibleHeight:v,visibleWidth:d}=(0,_dom.getAbsolutePos)(o);let l="bottom";if(e){let e=c,t=o+r;"top"===i?(l="top",t=o-u):i||(t+u+5>v&&(l="top",t=o-u),t<5&&(l="bottom",t=o+r)),e+s+5>d&&(e-=e+s+5-d),e<5&&(e=5),Object.assign(a,{left:e+"px",top:t+"px",minWidth:n+"px"})}else"top"===i?(l="top",a.bottom=r+"px"):i||v<o+r+u&&5<o-r-u&&(l="top",a.bottom=r+"px");return I.panelStyle=a,I.panelPlacement=l,(0,_vue.nextTick)()}}),U=()=>{var{loading:e,filterable:t,remote:l}=S,{fullData:i,hpTimeout:a}=C,o=A.value,s=R.value;e||o||(a&&(clearTimeout(a),C.hpTimeout=void 0),I.initialized||(I.initialized=!0),I.isActivated=!0,I.isAniVisible=!0,t&&(l&&s.enabled&&s.autoLoad&&!i.length?F:(g(),u))(),setTimeout(()=>{I.visiblePanel=!0,S.filterable&&(0,_vue.nextTick)(()=>{var e=E.value;e&&e.focus()});v().then(()=>m())},10),setTimeout(()=>{v().then(()=>m())},100),I.panelIndex<(0,_utils.getLastZIndex)()&&(I.panelIndex=(0,_utils.nextZIndex)()),ie(),r("visible-change",{visible:!0},null))},k=()=>{I.searchValue="",I.searchLoading=!1,I.visiblePanel=!1,C.hpTimeout=setTimeout(()=>{I.isAniVisible=!1},350),r("visible-change",{visible:!1},null)},n=(e,t)=>{Q(t),t!==S.modelValue&&(r("change",{value:t},e),l)&&a&&l.triggerItemEvent(e,a.itemConfig.field,t)},ae=(e,t)=>{C.remoteValMaps={},n(e,t),r("clear",{value:t},e)},oe=e=>{e=e.$event;ae(e,null),k()},se=(t,e)=>{var{modelValue:l,multiple:i}=S,a=C["remoteValMaps"];const o=e[N.value];var s=a[o];if(I.visiblePanel){if(s?s.item=e:a[o]={key:w(e),item:e,_index:-1},i){let e=[];s=_xeUtils.default.eqNull(l)?[]:_xeUtils.default.isArray(l)?l:[l],a=_xeUtils.default.findIndexOf(s,e=>e===o);e=-1===a?s.concat([o]):s.filter(e=>e!==o),n(t,e)}else n(t,o),k();I.reactFlag++}},re=e=>{var t=I["visiblePanel"];A.value||t&&(t=L.value,((0,_dom.getEventTargetNode)(e,t).flag?ie:k)())},ne=e=>{var t,l,i=I["visiblePanel"];A.value||(t=b.value,l=L.value,I.isActivated=(0,_dom.getEventTargetNode)(e,t).flag||(0,_dom.getEventTargetNode)(e,l).flag,i&&!I.isActivated&&k())},h=e=>{var t=e.disabled,e=w(e);return!t&&!Ve(e)},ue=(e,t)=>{var l=S["allowCreate"],{afterVisibleList:i,optList:a}=I,{optFullValMaps:o,optAddMaps:s}=C,r=N.value;let n=i,u=0;if(l&&a.length&&(i=a[0],s[l=w(i)])&&(u=1,n=[s[l]].concat(n)),!e)if(t)for(let e=0;e<n.length;e++){var c=n[e];if(h(c))return c}else for(let e=n.length-1;0<=e;e--){var v=n[e];if(h(v))return v}let d=0;a=e?o[e[r]]:null;if(-1<(d=a?a._index+u:d))if(t)for(let e=d+1;e<=n.length-1;e++){var p=n[e];if(h(p))return p}else if(0<d)for(let e=d-1;0<=e;e--){var f=n[e];if(h(f))return f}return null},ce=t=>{var e=S["clearable"],{visiblePanel:l,currentOption:i}=I;if(!A.value){var a=_ui.globalEvents.hasKey(t,_ui.GLOBAL_EVENT_KEYS.TAB),o=_ui.globalEvents.hasKey(t,_ui.GLOBAL_EVENT_KEYS.ENTER),s=_ui.globalEvents.hasKey(t,_ui.GLOBAL_EVENT_KEYS.ESCAPE),r=_ui.globalEvents.hasKey(t,_ui.GLOBAL_EVENT_KEYS.ARROW_UP),n=_ui.globalEvents.hasKey(t,_ui.GLOBAL_EVENT_KEYS.ARROW_DOWN),u=_ui.globalEvents.hasKey(t,_ui.GLOBAL_EVENT_KEYS.DELETE),c=_ui.globalEvents.hasKey(t,_ui.GLOBAL_EVENT_KEYS.SPACEBAR);if(a&&(I.isActivated=!1),l)if(s||a)k();else if(o)i&&(t.preventDefault(),t.stopPropagation(),se(t,i));else if(r||n){t.preventDefault();let e=ue(i,n);if(e=e||ue(null,n)){le(e);{l=e;s=n;const v=I["scrollYLoad"],{optFullValMaps:d,scrollYStore:p}=C,f=N.value,_=d[l[f]];if(_){const g=_.key;const h=_._index;if(h>-1){const m=V.value;const x=L.value;const b=x.querySelector(`[optid='${g}']`);if(m)if(b){const T=m.offsetHeight;const E=1;if(s){if(b.offsetTop+b.offsetHeight-m.scrollTop>T)m.scrollTop=b.offsetTop+b.offsetHeight-T;else if(b.offsetTop+E<m.scrollTop||b.offsetTop+E>m.scrollTop+m.clientHeight)m.scrollTop=b.offsetTop-E}else if(b.offsetTop+E<m.scrollTop||b.offsetTop+E>m.scrollTop+m.clientHeight)m.scrollTop=b.offsetTop-E;else if(b.offsetTop+b.offsetHeight-m.scrollTop>T)m.scrollTop=b.offsetTop+b.offsetHeight-T}else if(v)if(s)m.scrollTop=h*p.rowHeight-m.clientHeight+p.rowHeight;else m.scrollTop=h*p.rowHeight}}}}}else c&&t.preventDefault();else(r||n||o||c)&&I.isActivated&&(t.preventDefault(),U());I.isActivated&&u&&e&&ae(t,null)}},ve=()=>{k()},de=e=>{A.value||I.visiblePanel||(I.triggerFocusPanel=!0,U(),setTimeout(()=>{I.triggerFocusPanel=!1},500)),r("focus",{},e)},pe=e=>{me(e),r("click",{triggerButton:!1,visible:I.visiblePanel},e)},fe=e=>{I.isActivated=!1,r("blur",{},e)},_e=e=>{me(e),r("click",{triggerButton:!0,visible:I.visiblePanel},e)},ge=e=>{I.searchValue=e},he=()=>{I.isActivated=!0};const F=_xeUtils.default.debounce(()=>{var{modelValue:e,remote:t,remoteMethod:l}=S,i=I["searchValue"],a=R.value,l=a.queryMethod||l;t&&l&&a.enabled?(I.searchLoading=!0,Promise.resolve(l({$select:P,searchValue:i,value:e})).then(()=>(0,_vue.nextTick)()).catch(()=>(0,_vue.nextTick)()).finally(()=>{I.searchLoading=!1,g(),u()})):(g(),u())},350,{trailing:!0}),me=e=>{e=e.$event;e.preventDefault(),I.triggerFocusPanel?I.triggerFocusPanel=!1:(I.visiblePanel?k:U)()},xe=()=>{var{scrollYLoad:e,afterVisibleList:t}=I,l=C["scrollYStore"];I.bodyHeight=e?t.length*l.rowHeight:0,I.topSpaceHeight=e?Math.max(l.startIndex*l.rowHeight,0):0},be=()=>{var{filterable:e,allowCreate:t}=S;const{scrollYLoad:l,afterVisibleList:i,searchValue:a}=I;var{optAddMaps:o,scrollYStore:s}=C;const r=c.value;var n=N.value,s=l?i.slice(s.startIndex,s.endIndex):i.slice(0);return e&&t&&a&&(s.some(e=>e[r]===a)||(e=o[a]||(0,_vue.reactive)({[_()]:a,[r]:a,[n]:a}),o[a]=e,s.unshift(e))),I.optList=s,(0,_vue.nextTick)()},u=()=>{be(),xe()},Te=()=>(0,_vue.nextTick)().then(()=>{var e=I["scrollYLoad"],t=C["scrollYStore"],l=O.value,i=$.value;let a=0,o;(o=l?(o=i.sItem?l.querySelector(i.sItem):o)||l.children[0]:o)&&(a=o.offsetHeight),a=Math.max(20,a),t.rowHeight=a,(e?(l=V.value,e=Math.max(8,l?Math.ceil(l.clientHeight/a):0),l=Math.max(0,Math.min(2,_xeUtils.default.toNumber(i.oSize))),t.offsetSize=l,t.visibleSize=e,t.endIndex=Math.max(t.startIndex,e+l,t.endIndex),u):xe)()}),Ee=(e,t)=>{var l=V.value;return l&&(_xeUtils.default.isNumber(e)&&(l.scrollLeft=e),_xeUtils.default.isNumber(t))&&(l.scrollTop=t),I.scrollYLoad?new Promise(e=>{setTimeout(()=>{(0,_vue.nextTick)(()=>{e()})},50)}):(0,_vue.nextTick)()},m=()=>{const{lastScrollLeft:e,lastScrollTop:t}=C;return p().then(()=>{if(e||t)return C.lastScrollLeft=0,C.lastScrollTop=0,Ee(e,t)})},v=()=>{var e=b.value;return e&&e.clientWidth&&e.clientHeight?Te():Promise.resolve()},Se=e=>{var t=C["scrollYStore"],{startIndex:l,endIndex:i,visibleSize:a,offsetSize:o,rowHeight:s}=t,e=e.target.scrollTop,e=Math.floor(e/s),s=Math.max(0,e-1-o),o=e+a+o;!(e<=l||i-a-1<=e)||l===s&&i===o||(t.startIndex=s,t.endIndex=o,u())},ye=e=>{var t=e.target,l=t.scrollTop,t=t.scrollLeft,i=t!==C.lastScrollLeft,a=l!==C.lastScrollTop;C.lastScrollTop=l,C.lastScrollLeft=t,I.scrollYLoad&&Se(e),C.lastScrollTime=Date.now(),r("scroll",{scrollLeft:t,scrollTop:l,isX:i,isY:a},e)},d=e=>{{var t=e||[];const r=z.value,n=N.value,u=_(),c={},v={},d=[],p=e=>{d.push(e);let t=w(e);t||(t=getOptUniqueId(),e[u]=t),v[e[n]]={key:t,item:e,_index:-1}};t.forEach(e=>{p(e),e[r]&&(c[e[u]]=e)[r].forEach(p)}),C.fullData=d,C.optGroupKeyMaps=c,C.optFullValMaps=v,I.reactFlag++,g()}var{isLoaded:t,fullData:l,scrollYStore:i}=C,a=q.value,o=$.value;const s=N.value;if(Object.assign(i,{startIndex:0,endIndex:1,visibleSize:0}),C.synchData=e||[],I.scrollYLoad=!!o.enabled&&-1<o.gt&&(0===o.gt||o.gt<=l.length),be(),!t){i=a["selectMode"];if(0<e.length&&_xeUtils.default.eqNull(S.modelValue)){if("first"===i||"last"===i){const f=_xeUtils.default[i](e);f&&(0,_vue.nextTick)(()=>{_xeUtils.default.eqNull(S.modelValue)&&Q(f[s])})}C.isLoaded=!0}}return Te().then(()=>{m()})},p=()=>{var e=V.value;return e&&(e.scrollTop=0,e.scrollLeft=0),C.lastScrollTop=0,(C.lastScrollLeft=0,_vue.nextTick)()},Ve=e=>{var t=C["optGroupKeyMaps"];return!!t[e]};t={dispatchEvent:r,loadData:d,reloadData(e){return C.isLoaded=!1,p(),d(e)},isPanelVisible(){return I.visiblePanel},togglePanel(){return(I.visiblePanel?k:U)(),(0,_vue.nextTick)()},hidePanel(){return I.visiblePanel&&k(),(0,_vue.nextTick)()},showPanel(){return I.visiblePanel||U(),(0,_vue.nextTick)()},refreshOption(){return g(),u(),(0,_vue.nextTick)()},focus(){var e=T.value;return I.isActivated=!0,e.blur(),(0,_vue.nextTick)()},blur(){return T.value.blur(),(I.isActivated=!1,_vue.nextTick)()},recalculate:v,clearScroll:p};Object.assign(P,t);const Le=(e,d)=>{const{allowCreate:p,optionKey:f,modelValue:_}=S,g=I["currentOption"],h=C["optAddMaps"];var t=W.value;const m=c.value,x=N.value,b=K.value,T=t["useKey"],E=y.option;return e.map((t,e)=>{var{slots:l,className:i}=t,a=w(t),o=t[x];const s=Ve(a);var r=!(!p||!h[a]),o=!r&&(_xeUtils.default.isArray(_)?-1<_.indexOf(o):_===o),n=r||!s||isOptionVisible(t);const u=!(r||(v=o,c=d,!t.disabled&&(!c||!c.disabled)&&(!G.value||v)));var c=l?l.default:null,v={option:t,group:null,$select:P},l=E?J(E,v):c?J(c,v):(0,_utils.getFuncText)(t[s?b:m]);return n?(0,_vue.h)("div",{key:T||f?a:e,class:["vxe-select-option",i?_xeUtils.default.isFunction(i)?i(v):i:"",{"vxe-select-optgroup":s,"is--disabled":u,"is--selected":o,"is--add":r,"is--hover":g&&w(g)===a}],optid:a,onMousedown:e=>{0===e.button&&e.stopPropagation()},onClick:e=>{u||s||se(e,t)},onMouseenter:()=>{var e;u||s||(e=C.lastScrollTime)&&Date.now()<e+250||le(t)}},p?[(0,_vue.h)("span",{key:1,class:"vxe-select-option--label"},l),r?(0,_vue.h)("span",{key:2,class:"vxe-select-option--add-icon"},[(0,_vue.h)("i",{class:(0,_ui.getIcon)().ADD_OPTION})]):(0,_ui.renderEmptyElement)(P)]:l):(0,_ui.renderEmptyElement)(P)})};return(0,_vue.watch)(()=>I.staticOptions,e=>{d(e)}),(0,_vue.watch)(()=>S.options,e=>{d(e||[])}),(0,_vue.watch)(()=>S.optionGroups,e=>{d(e||[])}),(0,_vue.onMounted)(()=>{(0,_vue.nextTick)(()=>{var{options:e,optionGroups:t}=S;t?d(t):e&&d(e)}),_ui.globalEvents.on(P,"mousewheel",re),_ui.globalEvents.on(P,"mousedown",ne),_ui.globalEvents.on(P,"keydown",ce),_ui.globalEvents.on(P,"blur",ve)}),(0,_vue.onUnmounted)(()=>{_ui.globalEvents.off(P,"mousewheel"),_ui.globalEvents.off(P,"mousedown"),_ui.globalEvents.off(P,"keydown"),_ui.globalEvents.off(P,"blur")}),(0,_vue.provide)("$xeSelect",P),P.renderVN=()=>{var{className:e,popupClassName:t,loading:l,filterable:i}=S,{initialized:a,isActivated:o,isAniVisible:s,visiblePanel:r,bodyHeight:n,topSpaceHeight:u}=I,c=Y.value,v=A.value,d=Z.value,p=M.value,f=B.value,_=j.value,g=y.default,h=y.header,m=y.footer;const x=y.prefix;return f?(0,_vue.h)("div",{ref:b,class:["vxe-select--readonly",e]},[(0,_vue.h)("div",{class:"vxe-select-slots",ref:"hideOption"},g?g({}):[]),(0,_vue.h)("span",{class:"vxe-select-label"},d)]):(0,_vue.h)("div",{ref:b,class:["vxe-select",e?_xeUtils.default.isFunction(e)?e({$select:P}):e:"",{["size--"+c]:c,"is--visible":r,"is--disabled":v,"is--filter":i,"is--loading":l,"is--active":o}]},[(0,_vue.h)("div",{class:"vxe-select-slots",ref:"hideOption"},g?g({}):[]),(0,_vue.h)(_input.default,{ref:T,clearable:S.clearable,placeholder:_,readonly:!0,disabled:v,type:"text",prefixIcon:S.prefixIcon,suffixIcon:l?(0,_ui.getIcon)().SELECT_LOADED:r?(0,_ui.getIcon)().SELECT_OPEN:(0,_ui.getIcon)().SELECT_CLOSE,autoFocus:!1,modelValue:d,onClear:oe,onClick:pe,onFocus:de,onBlur:fe,onSuffixClick:_e},x?{prefix:()=>x({})}:{}),(0,_vue.h)(_vue.Teleport,{to:"body",disabled:!p||!a},[(0,_vue.h)("div",{ref:L,class:["vxe-table--ignore-clear vxe-select--panel",t?_xeUtils.default.isFunction(t)?t({$select:P}):t:"",{["size--"+c]:c,"is--transfer":p,"ani--leave":!l&&s,"ani--enter":!l&&r}],placement:I.panelPlacement,style:I.panelStyle},a&&(r||s)?[(0,_vue.h)("div",{class:"vxe-select--panel-wrapper"},[i?(0,_vue.h)("div",{class:"vxe-select--panel-search"},[(0,_vue.h)(_input.default,{ref:E,class:"vxe-select-search--input",modelValue:I.searchValue,clearable:!0,disabled:!1,readonly:!1,placeholder:(0,_ui.getI18n)("vxe.select.search"),prefixIcon:(0,_ui.getIcon)().INPUT_SEARCH,"onUpdate:modelValue":ge,onFocus:he,onChange:F,onSearch:F})]):(0,_ui.renderEmptyElement)(P),h?(0,_vue.h)("div",{class:"vxe-select--panel-header"},h({})):(0,_ui.renderEmptyElement)(P),(0,_vue.h)("div",{class:"vxe-select--panel-body"},[(0,_vue.h)("div",{ref:V,class:"vxe-select-option--wrapper",onScroll:ye},[(0,_vue.h)("div",{class:"vxe-select--y-space",style:{height:n?n+"px":""}}),(0,_vue.h)("div",{ref:O,class:"vxe-select--body",style:{marginTop:u?u+"px":""}},(()=>{var{optList:e,searchLoading:t}=I;return t?[(0,_vue.h)("div",{class:"vxe-select--search-loading"},[(0,_vue.h)("i",{class:["vxe-select--search-icon",(0,_ui.getIcon)().SELECT_LOADED]}),(0,_vue.h)("span",{class:"vxe-select--search-text"},(0,_ui.getI18n)("vxe.select.loadingText"))])]:e.length?Le(e):[(0,_vue.h)("div",{class:"vxe-select--empty-placeholder"},S.emptyText||(0,_ui.getI18n)("vxe.select.emptyText"))]})())])]),m?(0,_vue.h)("div",{class:"vxe-select--panel-footer"},m({})):(0,_ui.renderEmptyElement)(P)])]:[])])])},P},render(){return this.renderVN()}});