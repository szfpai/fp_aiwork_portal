{"version":3,"file":"linear-gradient.js","sources":["../../../../../components/color-picker/components/panel/linear-gradient.tsx"],"sourcesContent":["import { defineComponent, onBeforeUnmount, onMounted, reactive, ref, watch } from 'vue';\nimport { cloneDeep } from 'lodash-es';\nimport { GRADIENT_SLIDER_DEFAULT_WIDTH } from '@tdesign/common-js/color-picker/constants';\nimport { genGradientPoint, gradientColors2string, GradientColorPoint } from '../../utils';\nimport { InputNumber as TInputNumber } from '../../../input-number';\nimport { useBaseClassName } from '../../hooks';\nimport { useCommonClassName } from '../../../hooks/useConfig';\nimport baseProps from './base-props';\n\nconst DELETE_KEYS: string[] = ['delete', 'backspace'];\n\nexport default defineComponent({\n  name: 'LinearGradient',\n  inheritAttrs: false,\n  props: {\n    ...baseProps,\n    enableMultipleGradient: {\n      type: Boolean,\n      default: true,\n    },\n  },\n  setup(props) {\n    const baseClassName = useBaseClassName();\n    const { STATUS } = useCommonClassName();\n    const statusClassNames = STATUS.value;\n    const refSlider = ref<HTMLElement>(null);\n    const sliderRect = reactive({\n      left: 0,\n      width: GRADIENT_SLIDER_DEFAULT_WIDTH,\n    });\n    const isDragging = ref<Boolean>(false);\n    const isMoved = ref<Boolean>(false);\n    const degree = ref(props.color.gradientDegree);\n    const selectedId = ref(props.color.gradientSelectedId);\n    const colors = ref<GradientColorPoint[]>(cloneDeep(props.color.gradientColors));\n\n    watch(\n      () => props.color.gradientDegree,\n      (value) => (degree.value = value),\n    );\n    watch(\n      () => props.color.gradientSelectedId,\n      (value) => (selectedId.value = value),\n    );\n    watch(\n      () => props.color.gradientColors,\n      (value) => {\n        colors.value = cloneDeep(value);\n      },\n      {\n        deep: true,\n      },\n    );\n\n    const handleChange = (key: 'degree' | 'selectedId' | 'colors', payload: any, addUsedColor?: boolean) => {\n      if (props.disabled) {\n        return;\n      }\n      props.onChange({\n        key,\n        payload,\n        addUsedColor,\n      });\n    };\n\n    const handleDegreeChange = (value: number) => {\n      if (props.disabled || value === props.color.gradientDegree) {\n        return;\n      }\n      degree.value = value;\n      handleChange('degree', value, true);\n    };\n\n    const handleSelectedIdChange = (value: string) => {\n      if (props.disabled) {\n        return;\n      }\n      selectedId.value = value;\n      handleChange('selectedId', value);\n    };\n\n    const handleColorsChange = (value: GradientColorPoint[], isEnded?: boolean) => {\n      if (props.disabled) {\n        return;\n      }\n      colors.value = value;\n      handleChange('colors', value, isEnded);\n    };\n\n    /**\n     * 设置bar的位置\n     * @param left\n     * @returns\n     */\n    const updateActiveThumbLeft = (left: number) => {\n      const index = colors.value.findIndex((c) => c.id === selectedId.value);\n      if (index === -1) {\n        return;\n      }\n      const point = colors.value[index];\n      left = Math.max(0, Math.min(sliderRect.width, left));\n      const percentLeft = (left / sliderRect.width) * 100;\n      colors.value.splice(index, 1, {\n        color: point.color,\n        left: percentLeft,\n        id: point.id,\n      });\n      handleColorsChange(colors.value);\n    };\n\n    // 移动开始\n    const handleStart = (id: string) => {\n      const rect = refSlider.value.getBoundingClientRect();\n      sliderRect.left = rect.left;\n      sliderRect.width = rect.width || GRADIENT_SLIDER_DEFAULT_WIDTH;\n      if (isDragging.value || props.disabled) {\n        return;\n      }\n      isMoved.value = false;\n      isDragging.value = true;\n      handleSelectedIdChange(id);\n      // 让slider获取焦点，以便键盘事件生效。\n      refSlider.value.focus();\n      window.addEventListener('mousemove', handleMove, false);\n      window.addEventListener('mouseup', handleEnd, false);\n      window.addEventListener('contextmenu', handleEnd, false);\n    };\n\n    // 移动中\n    const handleMove = (e: MouseEvent) => {\n      if (!isDragging.value || props.disabled) {\n        return;\n      }\n      const left = e.clientX - sliderRect.left;\n      isMoved.value = true;\n      updateActiveThumbLeft(left);\n    };\n\n    // 移动结束\n    const handleEnd = () => {\n      if (!isDragging.value) {\n        return;\n      }\n      setTimeout(() => {\n        isDragging.value = false;\n      }, 0);\n      if (isMoved.value) {\n        handleColorsChange(colors.value, true);\n        isMoved.value = false;\n      }\n      window.removeEventListener('mousemove', handleMove, false);\n      window.removeEventListener('mouseup', handleEnd, false);\n      window.removeEventListener('contextmenu', handleEnd, false);\n    };\n\n    const handleKeyup = (e: KeyboardEvent) => {\n      if (props.disabled) {\n        return;\n      }\n      const points = colors.value;\n      let pos = points.findIndex((c) => c.id === selectedId.value);\n      const { length } = points;\n      // 必须保证有两个点\n      if (DELETE_KEYS.includes(e.key.toLocaleLowerCase()) && length > 2 && pos >= 0 && pos <= length - 1) {\n        points.splice(pos, 1);\n        if (!points[pos]) {\n          // eslint-disable-next-line no-nested-ternary\n          pos = points[pos + 1] ? pos + 1 : points[pos - 1] ? pos - 1 : 0;\n        }\n        const current = points[pos];\n        handleColorsChange(points, true);\n        handleSelectedIdChange(current?.id);\n      }\n    };\n\n    const handleThumbBarClick = (e: MouseEvent) => {\n      if (props.disabled || !props.enableMultipleGradient) {\n        return;\n      }\n      let left = e.clientX - sliderRect.left;\n      left = Math.max(0, Math.min(sliderRect.width, left));\n      const percentLeft = (left / sliderRect.width) * 100;\n      const newPoint = genGradientPoint(percentLeft, props.color.rgba);\n      colors.value.push(newPoint);\n      handleColorsChange(colors.value, true);\n      handleSelectedIdChange(newPoint.id);\n    };\n\n    onMounted(() => {\n      const rect = refSlider.value.getBoundingClientRect();\n      sliderRect.left = rect.left;\n      sliderRect.width = rect.width || GRADIENT_SLIDER_DEFAULT_WIDTH;\n    });\n\n    onBeforeUnmount(() => {\n      window.removeEventListener('mousemove', handleMove, false);\n      window.removeEventListener('mouseup', handleEnd, false);\n      window.removeEventListener('contextmenu', handleEnd, false);\n    });\n\n    return () => {\n      const { linearGradient, gradientColors } = props.color;\n      const thumbBackground = gradientColors2string({\n        points: gradientColors,\n        degree: 90,\n      });\n      return (\n        <div class={`${baseClassName.value}__gradient`}>\n          <div class={`${baseClassName.value}__gradient-slider`}>\n            <div\n              class={[`${baseClassName.value}__slider`, `${baseClassName.value}--bg-alpha`]}\n              onKeyup={handleKeyup}\n              tabindex={0}\n              ref={refSlider}\n            >\n              <ul\n                class=\"gradient-thumbs\"\n                onClick={handleThumbBarClick}\n                style={{\n                  background: thumbBackground,\n                }}\n              >\n                {colors.value.map((t) => {\n                  const left = `${Math.round(t.left * 100) / 100}%`;\n                  return (\n                    <li\n                      class={[\n                        `${baseClassName.value}__thumb`,\n                        'gradient-thumbs__item',\n                        selectedId.value === t.id ? statusClassNames.active : '',\n                      ]}\n                      key={t.id}\n                      title={`${t.color} ${left}`}\n                      style={{\n                        color: t.color,\n                        left,\n                      }}\n                      onClick={(e: MouseEvent) => e.stopPropagation()}\n                      onMousedown={() => handleStart(t.id)}\n                    >\n                      <span class={['gradient-thumbs__item-inner', `${baseClassName.value}--bg-alpha`]}></span>\n                    </li>\n                  );\n                })}\n              </ul>\n            </div>\n          </div>\n          <div class={`${baseClassName.value}__gradient-degree`} title={`${degree.value}deg`}>\n            <TInputNumber\n              size=\"small\"\n              theme=\"normal\"\n              min={0}\n              max={360}\n              step={1}\n              format={(value: number) => `${value}°`}\n              v-model={degree.value}\n              onBlur={handleDegreeChange}\n              onEnter={handleDegreeChange}\n              disabled={props.disabled}\n            />\n          </div>\n          <div class={[`${baseClassName.value}__gradient-preview`, `${baseClassName.value}--bg-alpha`]}>\n            <span\n              class=\"preview-inner\"\n              style={{\n                background: linearGradient,\n              }}\n            ></span>\n          </div>\n        </div>\n      );\n    };\n  },\n});\n"],"names":["DELETE_KEYS","defineComponent","name","inheritAttrs","props","_objectSpread","baseProps","enableMultipleGradient","type","Boolean","setup","baseClassName","useBaseClassName","_useCommonClassName","useCommonClassName","STATUS","statusClassNames","value","refSlider","ref","sliderRect","reactive","left","width","GRADIENT_SLIDER_DEFAULT_WIDTH","isDragging","isMoved","degree","color","gradientDegree","selectedId","gradientSelectedId","colors","cloneDeep","gradientColors","watch","deep","handleChange","key","payload","addUsedColor","disabled","onChange","handleDegreeChange","handleSelectedIdChange","handleColorsChange","isEnded","updateActiveThumbLeft","index","findIndex","c","id","point","Math","max","min","percentLeft","splice","handleStart","rect","getBoundingClientRect","focus","window","addEventListener","handleMove","handleEnd","e","clientX","setTimeout","removeEventListener","handleKeyup","points","pos","length","includes","toLocaleLowerCase","current","handleThumbBarClick","newPoint","genGradientPoint","rgba","push","onMounted","onBeforeUnmount","_props$color","linearGradient","thumbBackground","gradientColors2string","_createVNode","concat","background","map","t","round","active","onClick","stopPropagation","onMousedown","TInputNumber","format","onUpdateModelValue","$event"],"mappings":"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"}