{"version":3,"file":"tab-nav.js","sources":["../../../common/js/tabs/base.ts","../../../components/tabs/tab-nav.tsx"],"sourcesContent":["const getDomWidth = (dom: HTMLElement): number => dom?.offsetWidth || 0;\nconst getDomOffsetLeft = (dom: HTMLElement): number => dom?.offsetLeft || 0;\n\ntype scrollPosition = 'auto' | 'start' | 'center' | 'end';\n\nexport interface allElementDeps {\n  activeTab?: HTMLElement;\n  navsContainer?: HTMLElement;\n  navsWrap?: HTMLElement;\n  leftOperations?: HTMLElement;\n  toLeftBtn?: HTMLElement;\n  rightOperations?: HTMLElement;\n  toRightBtn?: HTMLElement;\n}\n\nexport function calculateOffset(depElement: allElementDeps, offset: number, scrollPosition: scrollPosition): number {\n  // 计算当前 activeTab 应该滚动到的位置\n  const { navsContainer, activeTab, rightOperations, leftOperations } = depElement;\n  const tabWidth = getDomWidth(activeTab);\n  const wrapWidth = getDomWidth(navsContainer);\n  const tabOffset = getDomOffsetLeft(activeTab);\n  const rightOperationsWidth = getDomWidth(rightOperations);\n  const leftOperationsWidth = getDomWidth(leftOperations);\n\n  if (scrollPosition === 'auto') {\n    if (tabOffset - leftOperationsWidth < offset) {\n      return tabOffset - leftOperationsWidth;\n    } if (tabOffset + tabWidth > offset + wrapWidth - rightOperationsWidth) {\n      return tabOffset + tabWidth - wrapWidth + rightOperationsWidth;\n    }\n  } else if (scrollPosition === 'start') {\n    return tabOffset - leftOperationsWidth;\n  } else if (scrollPosition === 'center') {\n    return tabOffset + (tabWidth - wrapWidth) / 2;\n  } else if (scrollPosition === 'end') {\n    return tabOffset + tabWidth - wrapWidth + rightOperationsWidth;\n  }\n  return offset;\n}\n\n/**\n * 计算上一页或下一页偏移量\n * @param elements 计算时依赖的元素\n * @returns number\n */\nexport function calcPrevOrNextOffset(elements: allElementDeps, offset: number, action: 'next' | 'prev'): number {\n  const { navsContainer, activeTab } = elements;\n  const navsContainerWidth = getDomWidth(navsContainer);\n  const activeTabWidth = getDomWidth(activeTab);\n  if (action === 'next') {\n    return offset + navsContainerWidth - activeTabWidth;\n  }\n  return offset - navsContainerWidth + activeTabWidth;\n}\n\n/**\n * 计算最大偏移量\n * @param elements 计算时依赖的元素\n * @returns number\n */\nexport function calcMaxOffset(elements: allElementDeps): number {\n  const { navsWrap, navsContainer, rightOperations, toRightBtn } = elements;\n  const wrapWidth = getDomWidth(navsWrap);\n  const containerWidth = getDomWidth(navsContainer);\n  const rightOperationsWidth = getDomWidth(rightOperations);\n  const toRightBtnWidth = getDomWidth(toRightBtn);\n  return wrapWidth - containerWidth + rightOperationsWidth - toRightBtnWidth;\n}\n\n/**\n * 计算合法偏移量\n * @param offset 偏移值\n * @param maxOffset 最大偏移值\n * @returns number\n */\nexport function calcValidOffset(offset: number, maxOffset: number): number {\n  return Math.max(0, Math.min(offset, maxOffset));\n}\n","import { h, defineComponent, Transition, ref, computed, watch, onMounted, nextTick } from 'vue';\nimport { debounce } from 'lodash-es';\nimport {\n  ChevronLeftIcon as TdChevronLeftIcon,\n  ChevronRightIcon as TdChevronRightIcon,\n  AddIcon as TdAddIcon,\n} from 'tdesign-icons-vue-next';\nimport { TdTabsProps } from './type';\nimport tabProps from './props';\nimport { calcMaxOffset, calcValidOffset, calculateOffset, calcPrevOrNextOffset } from '@tdesign/common-js/tabs/base';\n\n// 子组件\nimport TTabPanel from './tab-panel';\nimport TTabNavItem from './tab-nav-item';\nimport TTabNavBar from './tab-nav-bar';\n\n// hooks\nimport { useResize } from '../hooks/useListener';\nimport { usePrefixClass, useCommonClassName } from '../hooks/useConfig';\nimport { useGlobalIcon } from '../hooks/useGlobalIcon';\nimport useDragSort from '../hooks/useDragSort';\nimport { isFunction } from 'lodash-es';\n\nexport default defineComponent({\n  name: 'TTabNav',\n  resizeObserver: null,\n  props: {\n    theme: tabProps.theme,\n    panels: {\n      type: Array as { new (): Array<InstanceType<typeof TTabPanel>> },\n      default: (): Array<InstanceType<typeof TTabPanel>> => [] as Array<InstanceType<typeof TTabPanel>>,\n    },\n    action: Array,\n    value: tabProps.value,\n    placement: tabProps.placement,\n    scrollPosition: tabProps.scrollPosition,\n    size: tabProps.size,\n    disabled: tabProps.disabled,\n    addable: tabProps.addable,\n    onChange: tabProps.onChange,\n    onAdd: tabProps.onAdd,\n    onRemove: tabProps.onRemove,\n    dragSort: tabProps.dragSort,\n    onDragSort: tabProps.onDragSort,\n  },\n  setup(props) {\n    const componentName = usePrefixClass('tabs');\n    const { ChevronLeftIcon, ChevronRightIcon, AddIcon } = useGlobalIcon({\n      ChevronLeftIcon: TdChevronLeftIcon,\n      ChevronRightIcon: TdChevronRightIcon,\n      AddIcon: TdAddIcon,\n    });\n    const classPrefix = usePrefixClass();\n\n    const { SIZE } = useCommonClassName();\n\n    const scrollLeft = ref(0);\n\n    // refs\n    const navsContainerRef = ref();\n    const navsWrapRef = ref();\n    const leftOperationsRef = ref();\n    const rightOperationsRef = ref();\n    const toRightBtnRef = ref();\n    const activeTabRef = ref();\n    const maxScrollLeft = ref(0);\n\n    const getRefs = () => ({\n      navsContainer: navsContainerRef.value,\n      navsWrap: navsWrapRef.value,\n      leftOperations: leftOperationsRef.value,\n      rightOperations: rightOperationsRef.value,\n      toRightBtn: toRightBtnRef.value,\n      activeTab: activeTabRef.value,\n    });\n\n    // left right位置 选项卡的位置是在左右侧垂直方向铺开的\n    const isVerticalPlacement = computed(() => ['left', 'right'].includes(props.placement.toLowerCase()));\n\n    // 展示操作按钮\n    const canToLeft = computed(() => scrollLeft.value > 1);\n    const canToRight = computed(() => scrollLeft.value < maxScrollLeft.value - 1);\n\n    // style\n    const wrapTransformStyle = computed(() => {\n      if (isVerticalPlacement.value) return {};\n      return {\n        transform: `translate3d(${-scrollLeft.value}px, 0, 0)`,\n      };\n    });\n    const navsContainerStyle = computed(() => {\n      return props.addable ? { 'min-height': '48px' } : null;\n    });\n\n    // class\n    const iconBaseClass = computed(() => {\n      return {\n        [`${componentName.value}__btn`]: true,\n        [SIZE.value.medium]: props.size === 'medium',\n        [SIZE.value.large]: props.size === 'large',\n      };\n    });\n    const leftIconClass = computed(() => {\n      return {\n        [`${componentName.value}__btn--left`]: true,\n        ...iconBaseClass.value,\n      };\n    });\n    const rightIconClass = computed(() => {\n      return {\n        [`${componentName.value}__btn--right`]: true,\n        ...iconBaseClass.value,\n      };\n    });\n    const addIconClass = computed(() => {\n      return {\n        [`${componentName.value}__add-btn`]: true,\n        ...iconBaseClass.value,\n      };\n    });\n    const navContainerClass = computed(() => {\n      return {\n        [`${componentName.value}__nav-container`]: true,\n        [`${componentName.value}__nav--card`]: props.theme === 'card',\n        [`${classPrefix.value}-is-${props.placement}`]: true,\n        [`${classPrefix.value}-is-addable`]: props.addable,\n      };\n    });\n    const navScrollContainerClass = computed(() => {\n      return {\n        [`${componentName.value}__nav-scroll`]: true,\n        [`${classPrefix.value}-is-scrollable`]: canToLeft.value || canToRight.value,\n      };\n    });\n\n    const navsWrapClass = computed(() => {\n      return [\n        `${componentName.value}__nav-wrap`,\n        `${classPrefix.value}-is-smooth`,\n        { [`${classPrefix.value}-is-vertical`]: isVerticalPlacement.value },\n      ];\n    });\n\n    const setOffset = (offset: number) => {\n      scrollLeft.value = calcValidOffset(offset, maxScrollLeft.value);\n    };\n\n    const handleScroll = (action: 'prev' | 'next') => {\n      setOffset(calcPrevOrNextOffset(getRefs(), scrollLeft.value, action));\n    };\n\n    const handleWheel = (event: WheelEvent) => {\n      if (!canToLeft.value && !canToRight.value) return;\n\n      event.preventDefault();\n      const { deltaX, deltaY } = event;\n\n      if (Math.abs(deltaX) > Math.abs(deltaY)) {\n        setOffset(scrollLeft.value + deltaX);\n      } else {\n        setOffset(scrollLeft.value + deltaY);\n      }\n    };\n\n    const handleActiveTabScroll = () => {\n      setTimeout(() => {\n        setOffset(calculateOffset(getRefs(), scrollLeft.value, props.scrollPosition));\n      }, 0);\n    };\n\n    const getMaxScrollLeft = () => {\n      nextTick(() => {\n        maxScrollLeft.value = calcMaxOffset(getRefs());\n      });\n    };\n\n    // watch\n    watch([() => props.placement, () => props.panels], getMaxScrollLeft);\n    watch([() => props.scrollPosition], handleActiveTabScroll);\n\n    // life times\n    useResize(debounce(getMaxScrollLeft), navsContainerRef.value);\n\n    const handleAddTab = (e: MouseEvent) => {\n      props.onAdd?.({ e });\n    };\n\n    const tabClick = (event: MouseEvent, nav: Partial<InstanceType<typeof TTabPanel>>) => {\n      const { value, disabled } = nav;\n      if (disabled || props.value === value) {\n        return false;\n      }\n      props.onChange(value);\n    };\n    const removeBtnClick = ({ e, value, index }: Parameters<TdTabsProps['onRemove']>[0]) => {\n      props.onRemove({ e, value, index });\n    };\n    const setActiveTab = (ref: any) => {\n      if (!ref?.$el) return;\n      if (ref?.value === props.value && activeTabRef.value !== ref.$el) {\n        activeTabRef.value = ref.$el;\n        handleActiveTabScroll();\n      }\n    };\n\n    const { setNavsWrap } = useDragSort(props);\n\n    onMounted(() => {\n      setNavsWrap(navsWrapRef.value);\n      getMaxScrollLeft();\n      handleActiveTabScroll();\n    });\n    // renders\n    const renderNavsContent = () => {\n      return props.panels.map((panel, index) => {\n        let label;\n        if (panel?.children?.label) {\n          label = panel.children.label();\n        } else if (isFunction(panel.label)) {\n          label = panel.label(h);\n        } else {\n          label = panel.label || `选项卡${index + 1}`;\n        }\n        let draggable = props.dragSort;\n        if (draggable && panel.draggable === false) {\n          draggable = panel.draggable;\n        }\n        return (\n          <TTabNavItem\n            ref={setActiveTab}\n            draggable={draggable}\n            key={panel.value}\n            index={index}\n            theme={props.theme}\n            size={props.size}\n            placement={props.placement}\n            label={label}\n            active={panel.value === props.value}\n            disabled={props.disabled || panel.disabled}\n            removable={panel.removable}\n            value={panel.value}\n            onClick={(e: MouseEvent) => tabClick(e, panel)}\n            onRemove={removeBtnClick}\n          />\n        );\n      });\n    };\n    const renderArrows = () => {\n      return [\n        <div\n          ref={leftOperationsRef}\n          class={[`${componentName.value}__operations`, `${componentName.value}__operations--left`]}\n        >\n          <Transition name=\"fade\" mode=\"out-in\" appear>\n            {canToLeft.value ? (\n              <div class={leftIconClass.value} onClick={() => handleScroll('prev')}>\n                <ChevronLeftIcon />\n              </div>\n            ) : null}\n          </Transition>\n        </div>,\n        <div\n          ref={rightOperationsRef}\n          class={[`${componentName.value}__operations`, `${componentName.value}__operations--right`]}\n        >\n          <Transition name=\"fade\" mode=\"out-in\" appear>\n            {canToRight.value ? (\n              <div ref={toRightBtnRef} class={rightIconClass.value} onClick={() => handleScroll('next')}>\n                <ChevronRightIcon></ChevronRightIcon>\n              </div>\n            ) : null}\n          </Transition>\n          {props.addable ? (\n            <div class={addIconClass.value} onClick={handleAddTab}>\n              <AddIcon></AddIcon>\n            </div>\n          ) : null}\n          {props.action}\n        </div>,\n      ];\n    };\n    const renderNavs = () => {\n      const navContent = renderNavsContent();\n      return (\n        <div class={navContainerClass.value}>\n          <div class={navScrollContainerClass.value} onWheel={handleWheel}>\n            <div ref={navsWrapRef} class={navsWrapClass.value} style={wrapTransformStyle.value}>\n              {props.theme !== 'card' && (\n                <TTabNavBar placement={props.placement} value={props.value} navs={navContent} />\n              )}\n              {navContent}\n            </div>\n          </div>\n        </div>\n      );\n    };\n\n    return () => {\n      return (\n        <div ref={navsContainerRef} class={[`${componentName.value}__nav`]} style={navsContainerStyle.value}>\n          {renderArrows()}\n          {renderNavs()}\n        </div>\n      );\n    };\n  },\n});\n"],"names":["getDomWidth","dom","offsetWidth","getDomOffsetLeft","offsetLeft","calculateOffset","depElement","offset","scrollPosition","navsContainer","activeTab","rightOperations","leftOperations","tabWidth","wrapWidth","tabOffset","rightOperationsWidth","leftOperationsWidth","calcPrevOrNextOffset","elements","action","navsContainerWidth","activeTabWidth","calcMaxOffset","navsWrap","toRightBtn","containerWidth","toRightBtnWidth","calcValidOffset","maxOffset","Math","max","min","defineComponent","name","resizeObserver","props","theme","tabProps","panels","type","Array","default","value","placement","size","disabled","addable","onChange","onAdd","onRemove","dragSort","onDragSort","setup","componentName","usePrefixClass","_useGlobalIcon","useGlobalIcon","ChevronLeftIcon","TdChevronLeftIcon","ChevronRightIcon","TdChevronRightIcon","AddIcon","TdAddIcon","classPrefix","_useCommonClassName","useCommonClassName","SIZE","scrollLeft","ref","navsContainerRef","navsWrapRef","leftOperationsRef","rightOperationsRef","toRightBtnRef","activeTabRef","maxScrollLeft","getRefs","isVerticalPlacement","computed","includes","toLowerCase","canToLeft","canToRight","wrapTransformStyle","transform","concat","navsContainerStyle","iconBaseClass","_defineProperty","medium","large","leftIconClass","_objectSpread","rightIconClass","addIconClass","navContainerClass","navScrollContainerClass","navsWrapClass","setOffset","handleScroll","handleWheel","event","preventDefault","deltaX","deltaY","abs","handleActiveTabScroll","setTimeout","getMaxScrollLeft","nextTick","watch","useResize","debounce","handleAddTab","e","_props$onAdd","call","tabClick","nav","removeBtnClick","_ref5","index","setActiveTab","$el","_useDragSort","useDragSort","setNavsWrap","onMounted","renderNavsContent","map","panel","_panel$children","label","children","isFunction","h","draggable","_createVNode","TTabNavItem","removable","onClick","renderArrows","Transition","_default","renderNavs","navContent","TTabNavBar"],"mappings":"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"}